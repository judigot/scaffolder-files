<?php

namespace App\Repositories;

use Exception;
use Illuminate\Support\Str;
use Illuminate\Support\Facades\DB;
use Illuminate\Support\Collection;
use Illuminate\Database\Eloquent\Model;
use App\Repositories\BaseInterface;


abstract class BaseRepository implements BaseInterface
{
    protected Model $model;

    public function __construct(Model $model)
    {
        $this->model = $model;
    }

    public function getSortedQuery(?string $column = null, string $direction = 'asc'): \Illuminate\Database\Eloquent\Builder
    {
        $query = $this->model->query();
        $column ??= $this->model->getKeyName(); // Use model's primary key if column is null

        return $query->orderBy($column, $direction);
    }

    // Base Methods
[[LOOP(/BaseMethodsFileBased/**/**) --separator="\n\n" --template="    public function {{repositoryMethod}}
    {
        {{repositoryContent}}\n    }"]]
}
