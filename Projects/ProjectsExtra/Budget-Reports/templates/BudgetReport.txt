<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Budget Report - [[USE_DATA(budget.department)]] - [[USE_DATA(budget.year)]] [[USE_DATA(budget.quarter)]]</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 1100px; margin: 0 auto; padding: 20px; background: #ffffff; }
    .container { background: white; padding: 40px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
    .header { border-bottom: 4px solid #9c27b0; padding-bottom: 25px; margin-bottom: 30px; }
    .title { font-size: 2.2em; font-weight: bold; color: #2c3e50; margin-bottom: 10px; }
    .subtitle { font-size: 1.3em; color: #7f8c8d; }
    .summary-cards { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin: 25px 0; }
    .summary-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 8px; text-align: center; }
    .summary-card.allocated { background: linear-gradient(135deg, #2196f3 0%, #21cbf3 100%); }
    .summary-card.spent { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
    .summary-card.remaining { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
    .summary-card.utilization { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
    .card-label { font-size: 0.9em; opacity: 0.9; margin-bottom: 8px; }
    .card-value { font-size: 1.8em; font-weight: bold; }
    .status-badge { display: inline-block; padding: 8px 20px; border-radius: 20px; font-weight: bold; margin-top: 10px; }
    .on-track { background: #4caf50; color: white; }
    .over-budget { background: #f44336; color: white; }
    .under-budget { background: #ff9800; color: white; }
    .section { margin: 35px 0; }
    .section-title { font-size: 1.6em; font-weight: bold; color: #2c3e50; border-bottom: 2px solid #ecf0f1; padding-bottom: 10px; margin-bottom: 20px; }
    .budget-table { width: 100%; border-collapse: collapse; margin: 20px 0; }
    .budget-table th { background: #9c27b0; color: white; padding: 15px; text-align: left; }
    .budget-table td { padding: 12px 15px; border-bottom: 1px solid #ecf0f1; }
    .budget-table tr:hover { background: #f8f9fa; }
    .text-right { text-align: right; }
    .variance-positive { color: #4caf50; font-weight: bold; }
    .variance-negative { color: #f44336; font-weight: bold; }
    .variance-neutral { color: #2196f3; font-weight: bold; }
    .footer { margin-top: 50px; padding-top: 20px; border-top: 2px solid #ecf0f1; }
    .approval-section { display: grid; grid-template-columns: repeat(2, 1fr); gap: 30px; margin-top: 30px; }
    .approval-box { padding: 15px; border: 2px solid #ecf0f1; border-radius: 5px; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="title">Budget Report</div>
      <div class="subtitle">[[USE_DATA(budget.department)]] Department - [[USE_DATA(budget.year)]] [[USE_DATA(budget.quarter)]]</div>
      <div style="margin-top: 15px; color: #7f8c8d;">
        Period: [[USE_DATA(budget.period-start)]] to [[USE_DATA(budget.period-end)]]
      </div>
      <div class="status-badge [[USE_DATA(budget.status)]]">Status: [[USE_DATA(budget.status)]]</div>
    </div>

    <div class="summary-cards">
      <div class="summary-card allocated">
        <div class="card-label">Total Allocated</div>
        <div class="card-value">$[[USE_DATA(budget.allocated)]]</div>
      </div>
      <div class="summary-card spent">
        <div class="card-label">Amount Spent</div>
        <div class="card-value">$[[USE_DATA(budget.spent)]]</div>
      </div>
      <div class="summary-card remaining">
        <div class="card-label">Remaining</div>
        <div class="card-value">$[[USE_DATA(budget.remaining)]]</div>
      </div>
      <div class="summary-card utilization">
        <div class="card-label">Utilization</div>
        <div class="card-value">[[USE_DATA(budget.utilization-percentage)]]%</div>
      </div>
    </div>

    <div class="section">
      <div class="section-title">Budget Line Items</div>
      <table class="budget-table">
        <thead>
          <tr>
            <th>Category</th>
            <th class="text-right">Budgeted</th>
            <th class="text-right">Actual</th>
            <th class="text-right">Variance</th>
            <th class="text-right">Variance %</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          [[USE_DATA(budget.line-items)]]
        </tbody>
      </table>
    </div>

    <div class="footer">
      <div class="approval-section">
        <div class="approval-box">
          <div style="font-weight: bold; margin-bottom: 10px;">Department Manager</div>
          <div>[[USE_DATA(department-manager.name)]]</div>
          <div style="font-size: 0.9em; color: #7f8c8d;">[[USE_DATA(department-manager.title)]]</div>
          <div style="margin-top: 10px; color: #7f8c8d;">Approved: [[USE_DATA(department-manager.approval-date)]]</div>
        </div>
        <div class="approval-box">
          <div style="font-weight: bold; margin-bottom: 10px;">Finance Approver</div>
          <div>[[USE_DATA(finance-approver.name)]]</div>
          <div style="font-size: 0.9em; color: #7f8c8d;">[[USE_DATA(finance-approver.title)]]</div>
          <div style="margin-top: 10px; color: #7f8c8d;">Approved: [[USE_DATA(finance-approver.approval-date)]]</div>
        </div>
      </div>
      <div style="margin-top: 30px; text-align: center; color: #7f8c8d; font-size: 0.9em;">
        <p><strong>[[USE_DATA(company.name)]]</strong></p>
        <p>[[USE_DATA(company.address)]], [[USE_DATA(company.city)]], [[USE_DATA(company.state)]] [[USE_DATA(company.zip)]]</p>
      </div>
    </div>
  </div>
</body>
</html>

