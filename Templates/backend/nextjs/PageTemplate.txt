'use client';

import React from 'react';
import { QueryClient, HydrationBoundary, dehydrate } from '@tanstack/react-query';
import { I{{tableNamePascalCaseSingular}} } from '@/interfaces/I{{tableNamePascalCaseSingular}}';
import { {{tableNameCamelCaseSingular}}Keys } from '@/hooks/{{tableNameKebabCaseSingular}}/use{{tableNamePascalCaseSingular}}';
import {{tableNamePascalCaseSingular}}List from '@/components/{{tableNameKebabCaseSingular}}/{{tableNamePascalCaseSingular}}List';
import { api } from '@/hooks/{{tableNameKebabCaseSingular}}/api';

// Page side component - SSR/Static - only for prefetching
export async function generate{{tableNamePascalCaseSingular}}StaticProps() {
  const queryClient = new QueryClient();
  
  // Prefetch data for the page
  await queryClient.prefetchQuery({
    queryKey: {{tableNameCamelCaseSingular}}Keys.lists(),
    queryFn: api.getAll
  });

  return {
    dehydratedState: dehydrate(queryClient),
  };
}

interface I{{tableNamePascalCaseSingular}}PageProps {
  dehydratedState: unknown;
}

// Client side component - for interactivity
export default function {{tableNamePascalCaseSingular}}Page({
  dehydratedState,
}: I{{tableNamePascalCaseSingular}}PageProps) {
  return (
    <HydrationBoundary state={dehydratedState}>
      <div className="container mx-auto py-8">
        <h1 className="text-4xl font-bold mb-8">{{tableNamePascalCaseSingular}} Management</h1>
        <{{tableNamePascalCaseSingular}}List />
      </div>
    </HydrationBoundary>
  );
} 