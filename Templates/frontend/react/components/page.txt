'use client';

import React from 'react';
import { QueryClient, HydrationBoundary, dehydrate } from '@tanstack/react-query';
import { {{tableName.singular.camelCase}}Keys } from '@/hooks/{{tableName.singular.kebabCase}}/use{{tableName.singular.pascalCase}}.ts';
import {{tableName.singular.pascalCase}}Component from './{{tableName.singular.pascalCase}}Component.tsx';
import { api } from '@/hooks/{{tableName.singular.kebabCase}}/api.ts';

export async function generate{{tableName.singular.pascalCase}}StaticProps() {
  const queryClient = new QueryClient();
  await queryClient.prefetchQuery({
    queryKey: {{tableName.singular.camelCase}}Keys.lists(),
    queryFn: api.getAll
  });

  return {
    dehydratedState: dehydrate(queryClient),
  };
}

interface I{{tableName.singular.pascalCase}}PageProps {
  dehydratedState: unknown;
}

export default function {{tableName.singular.pascalCase}}Page({
  dehydratedState,
}: I{{tableName.singular.pascalCase}}PageProps) {
  return (
    <HydrationBoundary state={dehydratedState}>
      <div className="container mx-auto py-8">
        <h1 className="text-4xl font-bold mb-8">{{tableName.singular.pascalCase}} Management</h1>
        <{{tableName.singular.pascalCase}}Component />
      </div>
    </HydrationBoundary>
  );
}
