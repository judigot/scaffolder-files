import { useQuery, UseQueryOptions } from '@tanstack/react-query';
import { paginateResources } from '@/hooks/shared/usePaginate.ts';
import { I{{tableNamePascalCaseSingular}} } from '@/interfaces/I{{tableNamePascalCaseSingular}}.ts';

interface IPaginateParams {
  page?: number;
  perPage?: number;
  filters?: Record<string, unknown>;
  sortBy?: string;
  sortDirection?: 'asc' | 'desc';
}

interface IPaginatedResponse<T> {
  data: T[];
  total: number;
  currentPage: number;
  perPage: number;
  lastPage: number;
  hasNextPage: boolean;
  hasPreviousPage: boolean;
}

export const usePaginate{{tableNamePascalCasePlural}} = (
  params: IPaginateParams = {},
  options?: Omit<
    UseQueryOptions<IPaginatedResponse<I{{tableNamePascalCaseSingular}}>, Error>,
    'queryKey' | 'queryFn'
  >,
) => {
  const { page = 1, perPage = 15, filters, sortBy, sortDirection = 'asc' } = params;

  return useQuery({
    queryKey: ['{{tableNameCamelCasePlural}}', 'paginate', page, perPage, filters, sortBy, sortDirection],
    queryFn: () =>
      paginateResources<I{{tableNamePascalCaseSingular}}>(
        '/{{tableNameCamelCasePlural}}/paginate',
        page,
        perPage,
        filters,
        sortBy,
        sortDirection
      ),
    ...options,
  });
}; 